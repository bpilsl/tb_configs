# example config file: Ex0.conf
[RunControl]
#pCT_STOP_RUN_AFTER_N_SECONDS = 3000000
# from the base RunControl.cc
#EUDAQ_CTRL_PRODUCER_LAST_START = my_pd0
#EUDAQ_CTRL_PRODUCER_FIRST_STOP = my_pd0
# Steer which values to display in the GUI: producerName and displayed value are seperated by a ",". 
ADDITIONAL_DISPLAY_NUMBERS = "log,_SERVER"


[Producer.aida_tlu]
## GENERAL PARAMETERS
verbose= 1
skipconf= 0
confid= 20201311
delayStart= 200  

## HDMI CONFIGURATION
#  4-bits to determine direction of HDMI pins
HDMI1_set= 0x7 #1= output (driven by TLU), 0 = input. bit 0=CONT, 1=SPARE, 2=TRIG, 3=BUSY for eudet, Busy needs to be 0. (0b0111 = 0x7)
HDMI2_set= 0x7
HDMI3_set= 0x7
HDMI4_set= 0x7
#  Clock source (0= no clock, 1= Si5345, 2= FPGA)
HDMI1_clk = 1
HDMI2_clk = 1
HDMI3_clk = 1
HDMI4_clk = 1
#  Enable/Disable clock on differential LEMO
LEMOclk = 0

## PMT POWER CONFIGURATION
#PMT1_V= 0.8 #0.6363 #Szinti 4x4cm
#PMT2_V= 0.8 #0.6363 #Szinti 4x4cm
PMT3_V= 0.0
PMT4_V= 0.0

## TRIGGER CONFIGURATION
trigMaskHi = 0x00000000
trigMaskLo = 0x00000002 #0x00010002 #0x00000001  #8 coinc1+2
in0_STR = 0	# 0 
in0_DEL = 0	# 18
in1_STR = 0	# 0
in1_DEL = 0	# 18
in2_STR = 0	# 0
in2_DEL = 0 	# 0
in3_STR = 0
in3_DEL = 0
in4_STR = 0
in4_DEL = 0
in5_STR = 0 #streches pulse from 6.25ns (at 0) to 12.5ns
in5_DEL = 0
# Generate internal triggers (in Hz, 0= no triggers)
InternalTriggerFreq= 0 #4000 #00

## DISCRIMINATOR THRESHOLDS
DACThreshold0 = +0.5 #-0.012
DACThreshold1 = -0.1 #-0.012
DACThreshold2 = -0.5
DACThreshold3 = +0.5
DACThreshold4 = -0.12 #-0.0066
DACThreshold5 = -0.12

## DUT CONFIGURATION
 # DUTMask Which DUTs are on
#DUTMask= 0x3 #6 bit 0= DUT1, bit 1= DUT2, bit 2= DUT3, bit 3= DUT4
DUTMask= 0xF

 # DUTMaskMode Define AIDA (11) or EUDET (00) mode (2 bits per DUT)
DUTMaskMode= 0xFF #0x00

 # In EUDET mode: 0 = standard trigger/busy mode, 1 = raising BUSY outside handshake vetoes triggers (2 bits per DUT, 0x3= DUT 4! -backwards!)
DUTMaskModeModifier= 0x30 #0x30 #0xC0 PS: Check what this does! 0x0 w√ºrde ich hier eingeben

 # Ignore the BUSY signal for a DUT (0xF)
DUTIgnoreBusy= 0xF #ignores triggers
DUTIgnoreShutterVeto= 0x0
EnableRecordData= 1


# EnableShutterMode: 0x0. If 1, shutter mode is enabled. If 0, shutter mode is disabled.
EnableShutterMode= 0x0
# Define which input is used for shutter source [0 - 5]
ShutterSource = 5
# 32-bit counter of clocks. Set to 0 to not use internal shutter generator.
InternalShutterInterval = 0
# 32-bit counter of clocks
ShutterOnTime = 0 #start of shutter after trigger
# 32-bit counter of clocks
ShutterVetoOffTime = 0 #time after input-trigger, until first trigger is sent to output
# 32-bit counter of clocks
ShutterOffTime = 200000000 #end of shutter after trigger #200000000 = 5s (multiples of 25ns)

## DATA COLLECTOR
EUDAQ_DC= tlu_dc

## TLU MONITOR PARAMETER
FileComment="mpw3"
PlotWindowSizeinns=40e9
MinSpillTimeOnins=4.5
MinSpilldownTimeins=0.5
ThreshEvBegin=1
ThreshEvEnd=1
ThreshPartBegin=1
ThreshPartEnd=1

[LogCollector.log]
# Currently, all LogCollectors have a hardcoded runtime name: log
# nothing


[DataCollector.tlu_dc]
EUDAQ_FW=native
# the format of data file
EUDAQ_FW_PATTERN= /home/silicon/data/test/tlu_run$6R$X
# the name pattern of data file
# the $12D will be converted a data/time string with 12 digits.
# the $6R will be converted a run number string with 6 digits.
# the $X will be converted the suffix name of data file.
DISABLE_PRINT = 1


[Producer.RD50_MPW4_0]
voltage_key = "th"
voltage_value = 0.92

[Producer.keithleyPS]
voltage = -200
max_current = 5e-6

[DataCollector.mpw4_dc]
# connection to the monitor
EUDAQ_MN = mpw4_mon
EUDAQ_FW = native
EUDAQ_FW_PATTERN = /home/silicon/data/test/mpw4_run$6R$X
EUDAQ_DATACOL_SEND_MONITOR_FRACTION = 100
# config-parameters
DISABLE_PRINT = 1
XILINX_IP = 192.168.201.1

[Monitor.mpw4_mon]
buffer_size = 50000
update_thr = 500

[Producer.elog1]
start_cmd = "./get_mpw4_configs.sh" # command (shell script) to execute before starting a run
files2log = "peary_config.cfg, matrix_mpw4.txt" #files to attach to the auto Elog entries, EUDAQ config will be logged by default

[Producer.keithleyPS]
voltage = -200
max_current = 5e-6
